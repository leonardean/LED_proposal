#智能LED燈方案
##概述 (To be tailored for each customer)
隨著信息技術的發展和科技水平的提高,⼈們對於科技能夠給人類所帶來的便利越發充滿期待。為了滿足人們對於生活質量的憧憬,物聯網這⼀飽受期望的新興產業便隨之⽽而來。Kii Cloud也投⾝身其中,以其技術和市場優勢,致力於物聯網科技,并給與⼈們生活上的突破。

本方案介紹了Kii IoT解決方案在智能LED燈具領域的最佳實踐以及一些成功案例。
Kii是AllSeen聯盟的重要成員並在AllJoyn標準的全球推廣中做出了重大貢獻，合作夥伴以及客戶包括一些大型組織以及生產廠商，例如國內的阿里雲, HTC以及陽光照明等。 Kii為智能LED燈具的典型特性提供了一套完整的IoT解決方案，包括基於燈組和場景的遠程控制，用戶/設備數據管理以及同步，定時任務和安全機制等，Kii也為一些其他標準和特定的應用需求提供了一些靈活的可擴展的特性。

下面部分將介紹Kii IoT解決方案在智能LED燈具領域的一些具體特性和細節。

##基本功能介紹
Kii Cloud具備完善的功能來實現智能LED燈的應用場景，本篇幅將對這些功能逐個加以說明。
###設備管理
Kii Cloud與WinnerMicro、MTK、TI、Qualcomm等多家芯片⼚廠商合作並開發相應SDK,使得這些⼚廠家的芯⽚可以輕鬆使⽤Kii Cloud雲服務。我們的工程師還針對不同型號的芯片優化SDK,盡可能的提⾼其運⾏效率和減少運行資源消耗。針對物聯⽹網應用場景,我們支持的設備相關功能有:

- **組網**: 移動應⽤客戶端(Android, iOS)將WiFi網絡的SSID以及密碼通過廣播給設備,且設備收到後便會⾃動完成配置並連上指定WiFi。隨後，客戶端就可以對同個網絡內的設備進行添加。
- **本地控制**: 在沒有外網的情況下,只要客戶端和智能設備在同一個局域網內,客戶端便可通過本地局域⺴網發送指令給設備進行控制操作。
- **設備註冊**: 當設備所在的網絡有外網連接，設備可以指定一個唯一的⾝份標識(如MAC地址)和密碼將其註冊⾄至Kii Cloud,並存有不限數量的⾃定義參數。
- **設備所屬**: 當用戶使用客戶端成功添加一個智能設備時，Kii Cloud將為設備和用戶建立所屬關係，便於日後的管理和操作。一台設備可以有多個所屬者，一個用戶可以有多台所屬設備。
- **遠程控制**: 在⽤戶和LED燈不在同個局域網下,用戶同樣可以遠程控制自己的LED燈。這也是傳統電器智能化的顯著功能之⼀和雲端服務的最大價值所在。Kii Cloud提供基於MQTT傳輸協議的遠程控制技術方案。
- **設備空間域(Thing Scope)**: 每個設備擁有其獨立的空間域用於自行儲存其所需的數據,而在各自的空間域中,數據的結構也可以靈活地自定義。每個設備空間域內數據默認僅對設備本身公開訪問。

###多種連接方式
使用Kii Cloud進行物聯網開發時，開發者既可以選擇將智能設備自身與外網相連接，直接使用雲端服務API；也可以選擇將智能設備與網關(Gateway)連接，由網關與雲端服務進行交互并轉達指令和消息。作為Allseen Alliance成員之一，Kii Cloud支持一切符合Alljoyn協議標準的設備與網關。
###設備控制
單⼀LED燈的控制并不能完全展示物聯網技術所帶來的便利,更加自由的組合操作才能滿足用⼾的多樣化需求。為此，除了最基本的單一LED燈的控制之外，Kii Cloud還提供了以下多種控制方式:

- **批量操作**: 用戶可以臨時指定多個LED燈并對其進行統一操作，以達到設定一致的目的。
- **燈組控制**: 將兩個或兩個以上的LED燈創建并保存為燈組,用戶可以直接對燈組進行控制。每次對燈組進⾏開關,更改顏色等操作都將同時操作燈組所包含的所有燈。
- **場景設置**: 將多個燈或者燈組創建為場景,在場景中每個燈/燈組的設定各不相同且獨⽴于其他所有控制方式。當用戶使用某個場景設置時,則將其所包含的燈/燈組設置為各自所預設的狀態。

###用戶管理
Kii Cloud擁有完善的用戶系統。⽤戶和設備並非獨立,Kii Cloud使開發者能夠根據業務邏輯靈活地處理用戶和設備的關係,從而達到深層次的權限意義。

- **⽤戶註冊**: 每個用戶可以使⽤用戶名/郵箱/⼿機號,和密碼進行賬號註冊,並存有不限數量的自定義參數。
- **社交網絡**: 除了手動註冊登錄信息至Kii Cloud之外,還可以使用社交網絡賬號進行更快捷的註冊,Kii Cloud支持的社交平台有QQ,微博,⼈人,新浪,Facebook,Twitter,LinkedIn等。
- **⽤戶空間域(User Scope)**: 和設備空間域相同,每個⽤戶也有獨立的空間域進行數據存儲。
- **用戶組**: 用戶之間可以建⽴群組關係從而進行複雜業務邏輯,用戶組成員共享用戶組空間域(可⽤於組內數據分享)。
**設備所屬關係**: Kii Cloud提供方法讓用戶(組)和設備建立所屬關係,所屬關係建立可以使⽤雙向驗證以確保安全性和私密性。設備的所屬者對該設備空間域同樣具有訪問權限。

###數據管理
在Kii Cloud中，數據都儲存在隸屬於不同空間域的Bucket容器中。除了設備空間域、用戶空間域、用戶組空間域外，每個應用都有其應用空間域。應用空間域內的所有數據對所有用戶(組)和設備公開訪問。在Kii Cloud中，所有的數據條目都可以被增、刪、改、查。數據都將以NoSQL的形式上傳和讀取，很大程度增添了數據結構的靈活性。具體的數據類型則包括：字符串、整型、布爾值、浮點型、數組等。每種空間域擁有相應地默認訪問權限列表:

Scope  | 創建新Bucket | 于Bucket中創建數據 | 从Bucket中訪問數據 | 刪除Bucket | 更改權限
------------- | ------------- | ------------- | ------------- | ------------- | -------------
Application	| -任何認證用戶	 | -任何認證用戶 |	-任何認證用戶/未認證用戶 | -任何認證用戶 |	-應用管理員
Group	| -所有小組成員 <br> -小組創建者	 | -所有小組成員 <br> -小組創建者 <br> -Bucket創建者	| -所有小組成員 <br> -小組創建者 <br> -Bucket創建者 | -小組創建者 <br> -Bucket創建者	| -小組創建者
User	| -該用戶	| -該用户 <br> -Bucket創建者 | -該用户 <br> -Bucket創建者 | -該用户 <br> -Bucket創建者	| -該用户
Thing	| -該设备 <br> -所屬者 | -該设备<br>-所屬者<br>-Bucket創建者|-該设备<br>-所屬者-Bucket創建者|	-該设备<br>-所屬者<br>-Bucket創建者|-該设备<br>-所屬者<br>-Bucket創建者

Kii Cloud同樣提供開發者更改權限列表的功能(默認的權限條目不能刪除)，以應對複雜的業務邏輯。
###安全性
Kii Cloud使用REST API(REST應用程序編程接口)的形式從服務端向客戶端提供功能服務。 REST (Representational State Transfer), 即為表述性狀態轉移,是整個互聯網結構的一個抽象性特徵。更準確的說,REST是一種結構風格,它充分利用了作為互聯網基石的Http協議,構建了一個面向應用而非面向web 瀏覽器/用戶的編程約定,這一約定現在已成為互聯網雲服務API的首選。

REST繼承了HTTP協議無狀態的特性,每一個請求都是上下文無關的,請求本身包含了相應端為相應這一請求所需的全部信息。這消除了分佈式系統橫向擴展時最大的瓶頸,改善了分佈式系統的可見性、可靠性以及可伸縮性,從事使得服務端可以自由的將前端請求調度給任意一台可用的後台服務器提供服務,而不必顧忌其他。

基於REST協議的功能接口，Kii Cloud同樣提供了安全的LED燈控制流程。具體體現在:

- **Admin控制**: 在LED燈的應用場景中，作為LED燈唯一的管理員(所屬者)，他可以隨時移除和添加可以控制LED燈的用戶。
- **遠程控制**: 用戶是否能夠對某設備進行遠程控制的權限會被嚴格地控制。Kii Cloud會確保只有合法的設備操控者才能夠查看到并控制LED燈。

###定時任務
除了對於燈的多樣即時控制,在Kii Cloud功能的支持下,同樣可以實現對於燈,燈組,場景的定時控制。即用戶可以像設置手機鬧鐘一樣給他們的LED燈設置定時控制。一旦設置成功,無論⽤戶⾝在何處,預設的控制都會按時傳達到設備上。這一功能使得LED燈可以更加『聰明』地自動操作。
###數據同步
為了應對在頻繁的手機切換以及先後操作下數據不一致的問題, 開發者往往需要開發一套數據本地與雲端同步的功能。而Kii Cloud能給出完美解決賬號下數據同步問題的方案。同時支持server win, client win,和both win的同步策略，確保數據不遺漏,不冗餘,多台設備數據一致。
###固件更新
固件的管理對於智能設備至關重要。固件的迭代和升級可以根據⽤戶的反饋不斷優化目前的產品,修正已有的bug。Kii Cloud能夠使得固件的管理和在線升級變得前所未有的簡單。
- **固件管理**: 廠商能夠為不同型號,不同種類的產品創建和上傳各⾃的固件版本。同樣可以通過固件版本和產品型號篩選,從⽽既可以靈活地查看到當前設備型號所使用的固件版本,也可以查看到某一固件版本所使用的設備型號。
- **固件升級**: 廠商可以隨時把已創建的固件版本推送到指定型號的智能LED燈中,智能LED燈將自動安裝最新固件。整個流程不需要用戶進行任何操作。

##高級功能介紹
除了對於物聯網智能產品的功能支持，Kii Cloud還為有需要的廠商提供拓展性服務和功能。這些功能服務對於物聯網產品將如虎添翼。
###開放API
如之前所提到的，Kii Cloud的功能都是以RESTAPI的形式公開以供使用。而Kii Cloud同樣為iOS, Android, JS, Unity開發了更易於使用的移動平台客戶端SDK，以便開發者能夠專注于用戶體驗和業務邏輯的開發。但這並不代表你所開發的的功能只能用於自家的App中。Kii Cloud讓開發者可以把所開發的功能模組放置在雲端服務器中，并公開API，從而擴大了該功能的使用範圍。即便是在自家的App中調用自定義的開放API，也可以起到隱藏業務邏輯的作用。
###與現有用戶系統連接
大多成熟的企業級客戶已經有自己的用戶系統，而且希望能夠充分利用已有的用戶資源。Kii Cloud可以將應用與現有的用戶系統連接，將其中的用戶信息與Kii Cloud的功能相整合。
###互通操作
多個來自不同廠家的物聯網設備的交互操作可能會使你的設備更加有趣且不再孤單。Kii Cloud為平台中的所有物聯網應用提供這一功能。不同的應用可以自由選擇公開其Trigger和Action的調用:

- **Trigger**: 當某一參數的值達到所設置的範圍時，便會向雲端發送確認信息。
- **Action**: 可以被公開調用的遠程控制指令。

這樣就很可能出現這樣的的使用情況: 用戶有一個帶有GPS定位功能手環，家中有智能LED燈。他可以設置Trigger為: 經緯度在家附近的範圍；Action為:打開家中的LED燈。則當他回家時走到所設置的位置範圍時家中的燈就會自動打開。
###數據收集與分析
數據分析是Kii Cloud所提供的最有價值的功能之一。數據分析能夠有效及時地反饋某功能/產品​​的終端表現, 開發者/商家可以根據產品使⽤用情況調整軟件功能和產品走向,從⽽而最大限度地把握和滿足客戶的(潛在)需求。 Kii Cloud能夠記錄下海量的用戶行為數據與產品工作數據並加以分析/匯總/展示,目前Kii Cloud提供兩種類型的數據分析:

- **基礎分析**: Kii Cloud預設包括應⽤的用戶數量、文件數量、數據數​​量的統計,以折線圖的形式直觀地呈現出以上數據的走勢和變化趨勢。如下圖所⽰為Kii Cloud開發者平台中的基礎分析樣例:
![](http://documentation.kii.com/en/guides/android/managing-analytics/basic-analytics/01.png)
- **Flex分析**: 根據應用程序業務邏輯個性化地定制數據分析。在Flex分析中,開發者可以⾃定義數據分析的維度和過濾參數,⽽根據自定義所選的數據類型不同,Flex分析⼜分為以下兩類:
 - App數據分析: 可以對應用所產生並儲存在Kii Cloud中的任何數據進行分析。如某⼀種類LED燈在設備中的⽐例,某組燈具的累計總工作時間/每天平均工作時間,某個房間燈具的開關次數。
 - 事件數據分析: Kii Cloud允許客戶端自行上傳自定義事件(如開燈這一動作可作為一個事件),而後￼事件数据分析功能则可以对客户端所定义并上传的事件进行分析。如某款多功能变⾊LED灯⼏种颜色每周分别被使⽤的频率。

Flex分析的結果可以由下圖所示的⽅式展現:
![](http://documentation.kii.com/en/guides/android/managing-analytics/flex-analytics/analyze-event-data/13.png)

分析的結果除了可以在開發者平台中顯示觀察，也可以通過API獲取至客戶端，從而向用戶進行展示。

###數據導出
當客戶希望對數據進行一些Kii Cloud平台之外的使用時，我們會為其提供數據導出的服務。導出的數據將以JSON格式文件交付。
###全球部署
Kii Cloud在美國，日本，中國，新加坡都設有服務器。為了使世界各地的用戶都能以儘可能低的網絡延遲體驗產品并將產品銷往全球,我們能夠幫助客戶將雲端服務部署在各個區域。在相應地域購買并激活的LED燈會⾃自動挑選最合適的服務器并與之連接。 同一個LED燈將無法同時在兩個地域激活連接。
###多種部署方案
Kii Cloud提供的公有雲在中國將服務器部署在阿里云上，其他的區域的服務器被部署在亞馬遜網絡服務(AWS)。Kii有經驗把服務器部署在不同類型的數據中心和PaaS之上。如果客戶希望能夠使用架設在指定數據中心的私有雲，我們可以提供這種服務。把Kii Cloud遷移到另一個PaaS平台或者數據中心可以在兩週內完成，一週的時間用於服務器遷移，第二週用作自動化測試以保證質量，確保服務完成。
##項目工作範圍
###工作結構分解
- **需求定义**：业务需求，性能需求等
- **功能设计**：从业务角度划分，设计功能点
- **技术设计**：设计功能点的具体技术细节与实现
- **开发与单元测试**：开发系统并对每一个单元进行测试
- **系统集成测试**：对集成后的系统/组件进行整体测试，验证系统与功能/技术设计的一致性
- **用户验收测试**：验证系统满足客户需求
- **交付**：文档，培训，数据处理，实施，上线等

###工时估算
根据项目的具体情况

###计划估算
根据项目的具体情况
##Kii的優勢
###高性能全程託管

您的IT 團隊不再需要花時間管理和運維服務器與資料庫。 Kii 提供全面的公共雲和私有云解決方案。我們的雲端平台為您提供可擴展的應用程序，自動更新與連續監測使用高峰、性能和安全性。歷年來，我們服務器的在線時間達到99.99%。

Kii 保障所有用戶和數據管理的安全性，並且與您構建一套滿足您規範標準的完整解決方案。您甚至可以通過與私有云的同步，將用戶資料和數據永久儲存。

您不需再擔心瞬間流量請求的爆發。使用Kii Cloud，並發請求的上限綁定的是單個數據bucket，而不是您的App。根據您的用戶、時限、對像類型等的需求，合理地建立盡可能多的bucket，每個bucket 每秒可處理多達150個請求。
###全球業務

連接緩慢或無法登入的App 很難使用戶保持活躍。為了提供您所需的穩定性能，Kii 先後在美國、日本、新加坡和中國設置數據中心和辦公室，專業知識和基礎建設滿足您全球業務的願景。我們同樣是全球多個物聯網聯盟的成員，協助您的產品尋求更廣闊的銷售渠道。
###運營商級的品質

App 的運行時間和穩定度是非常重要的。 Kii 提供的不只是企業等級的服務，我們無論是安全性、效能和可用性均達運營商級別。盈利和充足的資金，讓數以千計的運營商、企業和初創公司信任Kii 。目前我們服務於全球超過1.4億萬的最終用戶。
###IOT領先視角

成功的物聯網產品和移動App應具備紮實的戰略和計劃。我們協助的不僅是開發，而是將業務、設計與技術並駕齊驅。我們與您合作，了解您的目標、用戶需求和技術，並提供定制化的服務。我們在智能家電、工業設備、無線音頻/視頻、醫療監護等領域皆有豐富的設計和實施經驗。我們的成功經驗和合作夥伴絕對是您的首選。
###本地支持與開發

Kii擁有強大的解決方案團隊來給與客戶技術上的支持。我們所能提供的支持服務有：

- 根據客戶的業務需求設計并優化數據結構和數據傳輸流程
- 協助客戶解決已有技術和Kii Cloud在整合過程中的問題
- 為客戶進行所需的移動App開發和嵌入式開發
- 及時的故障檢修與分析
- 現場調試

###流程管理
**核心開發團隊- （Kii日本）SCRUM/Kanban/Sprint**

**解決方案團隊- （Kii美國，Kii新加坡，Kii中國，Kii西班牙）項目管理, 質量管理，業務/技術諮詢**
基於Kii IoT解決方案的最佳實踐，我們的團隊可以為您的產品和項目提供全方位的專業支持

- **時間與工時**：根據預估的工作量建立時間與工時計劃，並在整個項目週期中對進度進行監視與控制
- **溝通**：流暢與有效的溝通，確保信息/決策透明化並被告知到每一個項目干係人
- **質量管理**：按照標準的組織流程對項目每個階段的成果進行評估，追踪每個需求點從定義到交付的流程
- **信息安全**：分離測試數據與真實數據，同時根據Kii解決方案保證所有的信息由相應的安全機制保護並訪問
- **風險控制**：盡可能早期識別每一項風險並做好相應的防範措施
- **變更管理**：對每一項變更進行記錄並充分討論，同時評估相應的收益與影響
- **交付**：確保每一次交付都被標記並且可追溯，對每一次發布做好充足的上線計劃以及回滾計劃，降低意外發生的影響

##成功案例
###陽光照明
陽光LED項目中,我們根據雙方所交涉討論出的需求,構建了一個LED燈具智能化的整體解決方案。該方案的交付內容包含了:

- 終端用戶應用APP (iOS和安卓版本)
- 陽光方業務管理後台Web App
- LED燈芯片端嵌入式開發

通過與雲端服務的連接,我們成功實現了LED燈與用戶的互聯互通,使得用戶可以更加自由智能和自動化地控制其所有的LED燈。在整個應用的過程中,用戶可以執行如下的功能操作:

- LED燈組網
- 本地操作(單燈、燈組、場景) 
- 遠程控制(單燈、燈組、場景) 
- 定時任務操作
- 固件更新

而陽光運營方可以通過業務管理後台: 

- 創建和管理燈具型號
- 管理和推送固件更新
- 查看設備列表詳情
- 編輯關於消息
- 查看設備激活數量和地點

###Rooti
更多創業公司和大型企業正在研究物聯網(IoT) 項目。事實上,根據​經濟學人信息社(The Economist Intelligence Unit) ​所發布的報告顯示:96%的商界領袖希望他們的公司在未來三年內能夠在某些方面使用上物聯網。大多數公司正在尋找提高效率、縮短上市時間的方法。物聯網消費電子公司R​ooti 已經使用Kii​來獲取競爭優勢。

Rooti (原P​hyode)​設計了一款支持健康生活方式的飾品。繼成功推出W/Me 智慧型手環後,該公司採用Kickstarter 為其第二款移動健康產品籌集資金。

CliMate 是一個「迷你氣象台」,可以放在桌上或者像鑰匙圈一樣掛在包包上。實時測量溫度、濕度和紫外線,採集的數據可通過藍牙傳輸到用戶的手機應用上。如周邊環境舒適, CliMate app (支持iOS 和Android)將顯示一棵生長旺盛的植物;如果環境不太理想,這株植物將枯萎或死亡。

CliMate 想要成功,Rooti 就需要一個安全、可靠的物聯網連接服務器,存儲大量實時的氣象數據和用戶數據。 KiiCloud 能夠提供即時、可擴展的後端雲平台,且針對物聯網的功能進行優化。 Rooti 的開發者則可以將更多的精力集中在完善移動App 的用戶體驗和獨特的用戶界面上,而不是後端服務器的開發。

我們所見過的最牛的功能:一個實時氣象地圖、一個基於SPF 和膚色的防曬保護定時器,以及能夠接收突發氣象事件、溫度波動等推送通知的能力。

與Rooti 合作中最令人興奮的事情之一是幫助他們在緊迫的期限內完成部署工作,CliMate 在承諾的期限內移植到Kickstarter 贊助者中並能夠順利運行。在某些方面,我們的期限更加緊迫,但我們並無遺憾。 Kii 的全球基礎設施以及亞太區的合作夥伴有助於加快Rooti 將CliMate 計劃部署到所有的潛在市場,包括中國、 美國、歐洲和日本。
##總結


